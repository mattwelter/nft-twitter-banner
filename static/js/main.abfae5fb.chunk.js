(this["webpackJsonptwitter-banner-gen"]=this["webpackJsonptwitter-banner-gen"]||[]).push([[0],{125:function(e,t){},127:function(e,t){},244:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),r=n(90),s=n.n(r),i=(n(96),n(9)),o=n.n(i),l=n(16),u=n(91),d=n(6),b=(n(97),n(30)),j=n.n(b);function m(e){return function(t,n,a){this.bitmap.data.writeUInt32BE(e,a,!0)}}function h(e,t,n,a){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function e(t,n,a,c){var r,s,i,l,u,d,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2,s=35,i=Math.min(250,1500/(n.length+1)),l=a||0,e.next=3,j.a.read(t);case 3:return u=e.sent,e.next=6,Promise.all(n.map((function(e){return j.a.read(e)})));case 6:return d=e.sent,b=(1500-n.length*i)/(n.length+1),d.forEach((function(e,t){if(c){var n=(i-2*r)/Math.min(e.bitmap.width,e.bitmap.height),a=e.bitmap.width*n,o=e.bitmap.height*n;e.resize(a,o),u.scan(b+t*(i+b),1===l?s:2===l?500-s-i:(500-i-2*r)/2,i,i,m(64)),u.blit(e,b+r+t*(i+b),1===l?s+r:2===l?500-s+r-i:(500-i)/2,Math.max(0,(a-i)/2),Math.max(0,(o-i)/2),i-2*r,i-2*r)}else{var d=(i-2*r)/Math.max(e.bitmap.width,e.bitmap.height),j=e.bitmap.width*d,h=e.bitmap.height*d;e.resize(j,h),u.scan(b+t*(i+b)+(i-2*r-e.bitmap.width)/2,1===l?s+(i-2*r-e.bitmap.height)/2:2===l?500-s-i+(i-2*r-e.bitmap.height)/2:(500-e.bitmap.height-2*r)/2,e.bitmap.width+2*r,e.bitmap.height+2*r,m(64)),u.composite(e,b+r+t*(i+b)+(i-2*r-e.bitmap.width)/2,1===l?s+r+(i-2*r-e.bitmap.height)/2:2===l?500-s+r-i+(i-2*r-e.bitmap.height)/2:(500-e.bitmap.height)/2)}})),e.next=11,u.getBase64Async(j.a.MIME_JPEG);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f={0:"Center",1:"Top",2:"Bottom"},g=(n(244),n(245),n(0)),O=void 0,v=function(e){return new Promise((function(t,n){var a=new Image;return a.onload=t,a.onerror=n,a.src=e,a}))},x=function(e){var t=e.asset,n=e.addAsset,c=e.delAsset,r=e.inAssets,s=Object(a.useState)(!1),i=Object(d.a)(s,2),u=i[0],b=i[1];Object(a.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,v(t);case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t.image_url)}),[t]);var j=function(e){r(e)?c(e):n(e)};return Object(g.jsx)("div",{className:"asset-item",tabIndex:"0",onClick:function(e){e.preventDefault(),j(t)}.bind(O),onKeyDown:function(e){32===e.keyCode&&(e.preventDefault(),j(t))}.bind(O),children:Object(g.jsx)("div",{title:"".concat([t.collection.name,t.name].filter((function(e){return e})).join(" - ")),style:{borderRadius:3,width:"100%",paddingTop:"100%",backgroundColor:"".concat(t.background_color?t.background_color:"#eee"),backgroundImage:"url(".concat(u?"spinner.gif":t.image_url,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",filter:"brightness(".concat(r(t)?"1.0":"0.5",")")}})})},k=function(e){var t=e.addr,n=e.addAsset,c=e.delAsset,r=e.inAssets,s=Object(a.useState)([]),i=Object(d.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(!1),b=Object(d.a)(u,2),j=b[0],m=b[1],h=Object(a.useState)(!1),p=Object(d.a)(h,2),f=p[0],O=p[1],v=Object(a.useRef)(null),k=Object(a.useCallback)((function(e){e[0].isIntersecting&&!j&&function(e){if(!f){m(!0);var n,a=(n={owner:t,offset:e,limit:40},Object.keys(n).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e]))})).join("&"));fetch("https://api.opensea.io/api/v1/assets?"+a).then((function(e){return e.json()})).then((function(e){if(e.assets.length>0){var t=o.concat(e.assets);l(t),O(!1)}else O(!0);m(!1)})).catch((function(e){console.error(e)}))}}(o.length)}),[t,o,f,j]);return Object(a.useEffect)((function(){var e=v.current,t=new IntersectionObserver(k,{root:null,rootMargin:"0px",threshold:1});return v&&v.current&&t.observe(v.current),function(){return t.unobserve(e)}}),[v,k]),Object(a.useEffect)((function(){l([]),O(!1)}),[t]),Object(g.jsxs)("div",{className:"asset-list-wrapper",children:[Object(g.jsx)("div",{className:"asset-list",children:o.map((function(e,t){return Object(g.jsx)(x,{name:e.name,url:e.image_url,asset:e,addAsset:n,delAsset:c,inAssets:r},t)}))}),Object(g.jsx)("div",{className:"loader",ref:v,children:!f&&j&&Object(g.jsx)("span",{children:"\u2026"})})]})},w=(n(247),function(e){var t=e.message;return Object(g.jsx)("div",{className:"overlay",style:{},children:Object(g.jsx)("span",{className:"progress-message",style:{},children:t})})}),y=(n(248),void 0),N=function(e){var t=e.canRender,n=e.renderImage,a=(e.isAssetSelected,e.backgroundImages),c=e.backgroundImage,r=e.setBackgroundImage,s=e.alignment,i=e.setAlignment,o=e.isCropped,l=e.setCropped,u=function(e,t){e===l?l(!o):e(e===i?parseInt(t.target.value,10):t.target.value)};return Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n()}.bind(y),children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-25",children:Object(g.jsx)("label",{htmlFor:"background-image",children:"Background Image"})}),Object(g.jsx)("div",{className:"col-75",children:Object(g.jsxs)("select",{id:"background-image",name:"background",value:c,onChange:u.bind(y,r),children:[Object(g.jsx)("option",{value:"",disabled:!0,children:" -- Select An Option -- "}),Object.keys(a).map((function(e,t){return Object(g.jsx)("option",{value:e,children:a[e]},t)}))]})})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-25",children:Object(g.jsx)("label",{htmlFor:"alignment",children:"Vertical Alignment"})}),Object(g.jsx)("div",{className:"col-75",children:Object(g.jsx)("select",{name:"alignment",value:s,onChange:u.bind(y,i),children:Object.keys(f).map((function(e,t){return Object(g.jsx)("option",{value:e,children:f[e]},t)}))})})]}),Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-25",children:Object(g.jsx)("label",{htmlFor:"cropped",children:"Crop Images"})}),Object(g.jsx)("div",{className:"col-75",children:Object(g.jsx)("input",{type:"checkbox",id:"cropped",name:"cropped",onChange:u.bind(y,l),checked:o})})]}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("input",{type:"submit",disabled:!t(),value:"Generate"})})]})},A=(n(249),function(e){var t=e.dataURL;return Object(g.jsxs)(c.a.Fragment,{children:[Object(g.jsx)("div",{className:"banner-wrapper",style:{},children:Object(g.jsx)("img",{src:t,className:"banner",alt:"preview",style:{}})}),Object(g.jsx)("div",{className:"download-wrapper",style:{},children:Object(g.jsx)("a",{className:"download-btn",style:{},href:t,download:"banner.jpg",children:"Download"})})]})}),I=function(e){var t={};return e.split(",").forEach((function(e,n){var a=e.split("-"),c=Object(d.a)(a,2),r=c[0],s=c[1];t[r.trim()]=s.trim()})),t};var C=function(e){var t=Object(a.useState)("0x4f0fe3269b1844e5a6c81bfe961206abdee5d589"),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(d.a)(s,2),b=i[0],j=i[1],m=Object(a.useState)(""),p=Object(d.a)(m,2),f=p[0],O=p[1],v=Object(a.useState)(0),x=Object(d.a)(v,2),y=x[0],C=x[1],S=Object(a.useState)(!1),E=Object(d.a)(S,2),_=E[0],F=E[1],M=Object(a.useState)(""),R=Object(d.a)(M,2),B=R[0],D=R[1],P=Object(a.useState)(!1),T=Object(d.a)(P,2),L=T[0],U=T[1],z=function(){return 0<b.length},J=function(){return!L&&f&&z()},G=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,c){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J()){e.next=2;break}return e.abrupt("return");case 2:return U(!0),D(null),r=n.filter((function(e){return e.image_url})).map((function(e){return e.image_url})),e.prev=5,e.next=8,h(t,r,a,c);case 8:s=e.sent,D(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.error(e.t0);case 15:U(!1);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n,a,c){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){j([]),D(null)}),[c]),Object(g.jsxs)("div",{className:"App",style:{display:"flex",flexDirection:"column"},children:[Object(g.jsxs)("div",{className:"main",children:[Object(g.jsx)("div",{className:"sidebar",style:{},children:Object(g.jsx)(k,{addr:c,addAsset:function(e){if(!(b.length>=9)){var t=Object(u.a)(b);t.push(e),j(t)}},delAsset:function(e){var t=b.filter((function(t){return t.token_id!==e.token_id}));j(t)},inAssets:function(e){return b.filter((function(t){return t.token_id===e.token_id})).length>0}})}),Object(g.jsxs)("div",{className:"content",style:{},children:[Object(g.jsx)("div",{style:{padding:"0.5rem 1rem",backgroundColor:"#2c2d2f",color:"#fff"},children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-25",children:Object(g.jsx)("label",{htmlFor:"onwerID",children:"ETH Address"})}),Object(g.jsx)("div",{className:"col-25",children:Object(g.jsx)("input",{type:"text",onChange:function(e,t){e(t.target.value)}.bind(this,r),value:c,placeholder:"ETH Address",pattern:"0x[0-9a-f]{40}",maxLength:"42",size:"42"})})]})}),Object(g.jsx)(N,{backgroundImages:I(e.bgStr),backgroundImage:f,setBackgroundImage:O,alignment:y,setAlignment:C,isAssetSelected:z,renderImage:function(){G(f,b,y,_)},canRender:J,isCropped:_,setCropped:F}),B&&Object(g.jsx)(A,{dataURL:B})]})]}),L&&Object(g.jsx)(w,{message:"Work in progress."})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},E=document.getElementById("root");s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(C,{bgStr:E.getAttribute("data-bg-imgs")})}),E),S()},96:function(e,t,n){},97:function(e,t,n){}},[[250,1,2]]]);
//# sourceMappingURL=main.abfae5fb.chunk.js.map